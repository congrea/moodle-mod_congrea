{"version":3,"sources":["../src/congrea.js"],"names":["define","$","presetColor","change","val","value","css","congreaOnlinePopup","submit","expected","Date","now","hide","window","location","reload","newTab","open","closed","focus","attr","congreaPlayRecording","congreaHideJoin","timeDiff","document","ready"],"mappings":"AAWAA,OAAM,uBAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,mBAAxB,CAAD,CAA+C,SAASC,CAAT,CAAY,CAC7D,MAAO,CACHC,WAAW,CAAE,sBAAW,CACpBD,CAAC,CAAC,oDAAD,CAAD,CAAwDE,MAAxD,CAA+D,UAAW,CACtE,GAAIC,CAAAA,CAAG,CAAG,KAAKC,KAAf,CACAJ,CAAC,CAAC,oCAAD,CAAD,CAAwCK,GAAxC,CAA4C,kBAA5C,CAAgEF,CAAhE,EACAH,CAAC,CAAC,+BAAD,CAAD,CAAmCG,GAAnC,CAAuCA,CAAvC,CACH,CAJD,CAMH,CARE,CASHG,kBAAkB,CAAE,6BAAW,CAC3BN,CAAC,CAAC,eAAD,CAAD,CAAmBO,MAAnB,CAA0B,UAAY,CAClC,GAAIC,CAAAA,CAAQ,CAAGR,CAAC,CAAC,kCAAD,CAAD,CAAoCG,GAApC,EAAf,CACA,GAAIM,IAAI,CAACC,GAAL,GAAaF,CAAjB,CAA2B,CACvBR,CAAC,CAAC,WAAD,CAAD,CAAeW,IAAf,GACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACA,QACH,CAJD,IAIO,CACH,GAAIC,CAAAA,CAAM,CAAGH,MAAM,CAACI,IAAP,CAAY,EAAZ,CAAgB,SAAhB,CAAb,CACA,GAAIJ,MAAM,CAACG,MAAP,EAAiB,KAAAH,MAAM,CAACG,MAAP,CAAcE,MAAnC,CAAqD,CACjDF,CAAM,CAACG,KAAP,GACA,QACH,CACDlB,CAAC,CAAC,IAAD,CAAD,CAAQmB,IAAR,CAAa,QAAb,CAAuB,SAAvB,EACA,GAAIJ,CAAJ,CAAY,CACRA,CAAM,CAACG,KAAP,GACA,MAAOH,CAAAA,CACV,CACD,QACH,CACJ,CAnBD,CAoBH,CA9BE,CA+BHK,oBAAoB,CAAE,+BAAW,CAC7BpB,CAAC,CAAC,UAAD,CAAD,CAAcO,MAAd,CAAqB,UAAY,CAC7B,GAAIQ,CAAAA,CAAM,CAAGH,MAAM,CAACI,IAAP,CAAY,EAAZ,CAAgB,SAAhB,CAAb,CACA,GAAIJ,MAAM,CAACG,MAAP,EAAiB,KAAAH,MAAM,CAACG,MAAP,CAAcE,MAAnC,CAAqD,CACjDF,CAAM,CAACG,KAAP,GACA,QACH,CACDlB,CAAC,CAAC,IAAD,CAAD,CAAQmB,IAAR,CAAa,QAAb,CAAuB,SAAvB,EACA,GAAIJ,CAAJ,CAAY,CACRA,CAAM,CAACG,KAAP,GACA,MAAOH,CAAAA,CACV,CACD,QACH,CAZD,CAaH,CA7CE,CA8CHM,eAAe,CAAE,yBAASC,CAAT,CAAmB,CAChCtB,CAAC,CAACuB,QAAD,CAAD,CAAYC,KAAZ,CAAkB,UAAY,IAEtBhB,CAAAA,CAAQ,CAAGC,IAAI,CAACC,GAAL,GADkB,GAAlB,EAACY,CAAQ,CAAG,EAAZ,CADW,CAG1BtB,CAAC,CAAC,iCAAD,CAAD,CAAmCG,GAAnC,CAAuCK,CAAvC,CACH,CAJD,CAKH,CApDE,CAsDV,CAvDK,CAAN","sourcesContent":["/**\r\n * Color setting for congrea\r\n *\r\n * You can have a rather longer description of the file as well,\r\n * if you like, and it can span multiple lines.\r\n *\r\n * @package    mod_Congrea\r\n * @copyright  2020 vidyamantra.com\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\ndefine(['jquery', 'core/ajax', 'core/notification'], function($) {\r\n    return {\r\n        presetColor: function() {\r\n            $(\".form-select.defaultsnext #id_s_mod_congrea_preset\").change(function() {\r\n                let val = this.value;\r\n                $('.admin_colourpicker .currentcolour').css('background-color', val);\r\n                $('#id_s_mod_congrea_colorpicker').val(val);\r\n            });\r\n\r\n        },\r\n        congreaOnlinePopup: function() {\r\n            $('#overrideform').submit(function () {\r\n                let expected = $('input[name =\"expectedendtime\"]').val();\r\n                if (Date.now() > expected) {\r\n                    $('.vcbutton').hide();\r\n                    window.location.reload();\r\n                    return false;\r\n                } else {\r\n                    let newTab = window.open('', 'popupVc');\r\n                    if (window.newTab && window.newTab.closed === false) {\r\n                        newTab.focus();\r\n                        return false;\r\n                    }\r\n                    $(this).attr('target', 'popupVc');\r\n                    if (newTab) {\r\n                        newTab.focus();\r\n                        return newTab;\r\n                    }\r\n                    return true;\r\n                }\r\n            });\r\n        },\r\n        congreaPlayRecording: function() {\r\n            $('.playAct').submit(function () {\r\n                let newTab = window.open('', 'popupVc');\r\n                if (window.newTab && window.newTab.closed === false) {\r\n                    newTab.focus();\r\n                    return false;\r\n                }\r\n                $(this).attr('target', 'popupVc');\r\n                if (newTab) {\r\n                    newTab.focus();\r\n                    return newTab;\r\n                }\r\n                return true;\r\n            });\r\n        },\r\n        congreaHideJoin: function(timeDiff) {\r\n            $(document).ready(function () {\r\n                let interval = (timeDiff - 30) * 1000;\r\n                let expected = Date.now() + interval;\r\n                $('input[name=\"expectedendtime\"]').val(expected);\r\n            });\r\n        },\r\n    };\r\n});"],"file":"congrea.min.js"}